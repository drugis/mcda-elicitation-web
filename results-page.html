<div ng-show="currentStep.type == 'done'">
  <div style="width: 400px; height: 400px">
    <rank-plot value="currentStep.results.ranks.data" parse-fn="rankGraphData" stacked="true" problem="problem"></rank-plot>
  </div>

  <h5>Rank acceptabilities</h5>
  <table>
    <thead>
      <tr>
        <th></th>
        <th ng-repeat="alternative in problem.alternatives">Rank {{$index + 1}}</th>
      </tr>
    </thead>
    <tbody>
    <tr ng-repeat="(key, alternative) in problem.alternatives">
      <td>{{alternative.title}}</td>
      <td ng-repeat="rank in currentStep.results.ranks.data[key]" class="heat">
        {{rank}}
      </td>
    </tr>
    </tbody>
  </table>

  <div class="row">
    <div class="columns large-6">
      <h5>Alternatives per rank</h5>
      <select ng-model="currentStep.selectedRank" class="large-3">
        <option ng-repeat="(k,v) in problem.alternatives" value="{{$index}}" ng-selected="$index == currentStep.selectedRank">
        Rank {{$index + 1}}
        </option>
      </select>

      <div style="width: 400px; height: 350px">
        <bar-chart value="currentStep.alternativesByRank(currentStep.selectedRank)"></bar-chart>
      </div>
    </div>
    <div class="columns large-6">
      <h5>Ranks per alternative</h5>
      <select ng-model="currentStep.selectedAlternative" class="large-3">
        <option ng-repeat="(key, alternative) in problem.alternatives" value="{{key}}" ng-selected="key == currentStep.selectedAlternative">
        {{alternative.title}}
        </option>
      </select>
      <div style="width: 400px; height: 350px">
        <bar-chart value="currentStep.ranksByAlternative(currentStep.selectedAlternative)"></bar-chart>
      </div>
    </div>
  </div>
  <h5>Central Weights</h5>
  <div style="width: 650px; height: 350px">
    <line-chart value="currentStep.centralWeights"></line-chart>
  </div>
  <table>
    <thead>
      <tr>
        <th>Alternative</th>
        <th ng-repeat="criterion in problem.criteria">{{criterion.title}}</th>
      </tr>
    </thead>
    <tbody>
    <tr ng-repeat="(a, alternative) in problem.alternatives">
      <td>{{alternative.title}}</td>
      <td ng-repeat="(c, criterion) in problem.criteria">
        {{currentStep.results.cw.data[a][c]}}
      </td>
    </tr>
    </tbody>
  </table>
</div>
